<div id="prodedit" class="page-layout simple fullwidth  doc-page element-doc-page" form-edit-quit-check>
    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div form-head-ico-title layout="row" layout-align="start center"></div>  
        <div edit-form-heads-buttons  class="right-side layout-row" layout="row" layout-align="start center"></div>
    </div>
    <!-- / HEADER -->
    
    <!-- CONTENT -->
    <div class="content" md-background-bg layout="row" layout-align="start start">
        
       <form name="current.userForm"  ng-submit="valid()" layout-fill  autocomplete="off">
         
          <md-tabs  layout-fill flex md-border-bottom md-selected="$scope.data.selectedIndex">
            <md-tab layout-fill label="Informations principales">
              <md-tab-content class="inputs" md-background-bg md-theme="docs-dark"   flex layout-fill layout-padding ms-scroll>
                <div style="width:100%;">
                  <div layout-gt-sm="row">  
                      <md-input-container class="md-inline" flex-gt-sm>
                        <md-checkbox ng-model="vm.item.actif" aria-label="Actif">
                            Actif
                        </md-checkbox>
                        </md-input-container>
                        <md-input-container  class="md-input-invalid" class="md-inline" flex-gt-sm>
                            <label>Marché</label>
                            <md-select  required ng-model="vm.item.marches" style="min-width:200px;">
                                <md-option ng-value="0">
                                    Local/Export
                                </md-option>
                                <md-option ng-value="1">
                                    Local
                                </md-option>
                                <md-option ng-value="2">
                                    Export
                                </md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Libellé</label>
                        <input required ng-model="vm.item.lib">
                      </md-input-container>
                      
                    </div>
                    <div layout-gt-sm="row">
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Produit douanier parent</label>
                          <input ng-model="vm.item.parent.lib" readonly ng-click="vm.showParentsDialog($event)">
                        <md-icon ng-if="vm.item.parent" ng-click="vm.clearParentProduct()" md-font-icon="icon-close" style="display:inline-block;color:rgb(213,0,0);margin-right:10px;"><md-tooltip>Vider produit douanier parent</md-tooltip></md-icon>
                        
                      </md-input-container>
                       <div class="md-block"  flex-gt-sm qte-input inprequired="true"  ng-model="vm.item.rendement"></div>
                      
                    </div>
                    <div layout-gt-sm="row">
                     
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Code produit</label>
                        <input required ng-model="vm.item.codeProd">
                      </md-input-container>
                      
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Prix de vente HT</label>
                        <input type="number" ng-model="vm.item.prixVente">
                      </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                     
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Couleur du produit</label>
                        <color-picker style="display:inline;" options="vm.cpOptions" ng-model="vm.item.color"></color-picker>
                      </md-input-container>
                    </div>
                    <div layout-gt-sm="row">
                      <md-input-container class="md-block" flex-gt-sm>
                        <label>Decription</label>
                        <textarea ng-model="vm.item.desc" rows="5"></textarea>
                      </md-input-container>
                    </div>
                </div>
              </md-tab-content>
            </md-tab>
            <md-tab layout-fill  ng-if="vm.item._id && vm.item.rendement" >
              <md-tab-label>
                <span style="margin-right:25px;">Règles</span>
                <span class="badge white-fg" style="background: rgb(244, 67, 54);">{{vm.gridRulesOptions.data.length}}</span>   
              </md-tab-label>
              <md-tab-body layout-fill  md-theme="docs-dark" style="width:100%;height:100%;">
                <md-content flex layout-fill layout="column" style="overflow:hidden;">
                  <div style="display:block;">
                    <md-button class="md-icon-button md-primary" ng-click="addRule()" aria-label="Settings">
                      <md-icon md-font-icon="icon-plus"></md-icon>
                    </md-button>
                    <input type="text" ng-model="vm.ruleTxtFilter" ng-change="vm.loadRulesPage(1,vm.rulePsize)" placeholder="Filtrer..."/>
                    
                  </div>
                  <div id="grid1"  style="display:block;" ui-grid-pagination layout-fill ui-grid="vm.gridRulesOptions"  class="grid"></div>
                </md-content>
              </md-tab-body>
            </md-tab>
            <md-tab layout-fill label="Objectif" ng-if="vm.item._id">
              <md-tab-content class="inputs" md-background-bg md-theme="docs-dark"   flex layout-fill layout-padding>
                <div style="width:100%;">
                    <objectif-line  ng-repeat="m in vm.mois" >
                    </objectif-line>
                </div>
              </md-tab-content>
            </md-tab>

            <md-tab layout-fill  ng-if="vm.item._id" >
              <md-tab-label>
                <span style="margin-right:25px;">Conditionnements</span>  
              </md-tab-label>
              <md-tab-body layout-fill  md-theme="docs-dark" style="width:100%;height:100%;">
                <md-content flex layout-fill layout="column" style="overflow:hidden;">
                  <div style="display:block;">
                    <input type="text" ng-model="vm.ruleTxtFilter" ng-change="vm.loadRulesPage(1,vm.rulePsize)" placeholder="Filtrer..."/>
                  </div>
                  <div id="gridCondits"  style="display:block;" ui-grid-pagination layout-fill ui-grid="vm.gridConditsOptions"  class="grid"></div>
                </md-content>
              </md-tab-body>
            </md-tab>
          </md-tabs>
        </form>
      </div>
    </div>
    <div style="visibility: hidden">
      <div class="md-dialog-container" id="ParentsDialog">
        <md-dialog layout-padding>
          <h2>Pre-Rendered Dialog</h2>
          <p>
            This is a pre-rendered dialog, which means that <code>$mdDialog</code> doesn't compile its
            template on each opening.
            <br/><br/>
            The Dialog Element is a static element in the DOM, which is just visually hidden.<br/>
            Once the dialog opens, we just fetch the element from the DOM into our dialog and upon close
            we restore the element back into its old DOM position.
          </p>
        </md-dialog>
      </div>
    </div>
</div>